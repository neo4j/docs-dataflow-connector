:page-role: beta
:target_property_type-valid-values-extra:

= Create a job specification file


include::{common}:partial$job-specification.adoc[tags=intro]


[#full-example]
.A full job specification example
====
Here below is an example job specification file that works out of the box to import the publicly-available `movies` dataset.

The next sections break it down and provide in-context information for each part.
We recommend reading this guide side by side with the job specification example.

[source, json]
----
include::example$google-cloud-movies-jobspec.json[]
----
====


include::{common}:partial$job-specification.adoc[tags=configuration]


== Sources

The `sources` section contains the definitions of the data sources, as a list. As a rough guideline, you can think `+one table <=> one source+`. The importer will leverage the data surfaced by the sources and make it available to the targets, which eventually map it into Neo4j.

.Source object specification and its defaults
[source, json]
----
{
  "type": "text",
  "name": "movies",
  "urls": [ "<path-to-csv>" ],
  "format": "excel",
  "column_delimiter": ",",
  "line_separator": "\n",
  "ordered_field_names": "movieId,title"
}
----

- `type` (string) -- `text`.
- `name` (string) -- A human-friendly label for the source (unique among all names; no spaces allowed). You will use this to reference the source from other parts of the specification file.
- `urls` (list of strings) -- The Google Storage location of the CSV file (ex. `gs://neo4j-datasets/movies.csv`).
- `format` (string) -- any of link:https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html[Apache's `CSVFormat`] predefined formats.
- `column_delimiter` (string) -- CSV field delimiter.
- `line_separator` (string) -- CSV line separator.
- `ordered_field_names` (string) -- List of field names the CSV file contains, in order.

.How to retrieve the Google Storage location of a file?
[%collapsible]
====
To retrieve the Google Storage location of a file in a Cloud bucket, expand the file options through the three dots on the right, and choose `Copy gsutil URI`.

[.shadow]
image::image$google-cloud-file-url.png[width=600]
====

CSV files must fulfill some constraints:

- **They should not contain headers**. Column names should be specified in the `ordered_field_names` attributes, and files should contain data rows only.
- They should not contain empty rows.


include::{common}:partial$job-specification.adoc[tags=targets]

include::{common}:partial$job-specification.adoc[tags=transformations]

include::{common}:partial$job-specification.adoc[tags=actions]

include::{common}:partial$job-specification.adoc[tags=variables]
