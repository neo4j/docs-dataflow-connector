:target_property_type-valid-values-extra:

= Create a job specification file


include::{common}:partial$job-specification.adoc[tags=intro]


[#full-example]
.A full job specification example
====
Here below is an example job specification file that works out of the box to import the publicly-available `movies` dataset.

The next sections break it down and provide in-context information for each part.
We recommend reading this guide side by side with the job specification example.

[source, json]
----
include::example$google-cloud-movies-jobspec.json[]
----
====


include::{common}:partial$job-specification.adoc[tags=configuration]


== Sources

The `sources` section contains the definitions of the data sources, as a list. As a rough guideline, you can think `+one table <=> one source+`. The importer will leverage the data surfaced by the sources and make it available to the targets, which eventually map it into Neo4j.

Source objects must at minimum specify the attributes `type`, `name`, `urls`, and `ordered_field_names`.
The default column delimiter and line separator are set depending on the specified `format`, according to link:https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html[Apache's `CSVFormat`].

.Source object specification and its defaults
[source, json]
----
{
  "type": "text",
  "name": "<sourceName>",
  "urls": [ "<csvPath1>", "<csvPath2>", ... ],
  "format": "default",
  "column_delimiter": "",
  "line_separator": "",
  "header": "movieId,title"
}
----

- `type` (string) -- `text`.
- `name` (string) -- A human-friendly label for the source (unique among all names; no spaces allowed). You will use this to reference the source from other parts of the specification file.
- `urls` (list of strings) -- The Google Storage location of the CSV file (ex. `gs://neo4j-datasets/movies.csv`). +
+
.How to retrieve the Google Storage location of a file?
[%collapsible]
====
To retrieve the Google Storage location of a file in a Cloud bucket, expand the file options through the three dots on the right, and choose `Copy gsutil URI`.

[.shadow]
image::image$google-cloud-file-url.png[width=600]
====
+
- `format` (string) -- The format of the provided CSV file. Valid values are: `default`, `excel`, `informix`, `mongo`, `mongo_tsv`, `mysql`, `oracle`, `postgres`, `postgresql_csv`, `rfc4180`. Formats behave in accordance with link:https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html[Apache's `CSVFormat`].
- `column_delimiter` (string) -- CSV field delimiter.
- `line_separator` (string) -- CSV line separator.
- `header` (string) -- Full list of field names the CSV file contains, in order. Alternatively, the list may be restricted to only the first few columns.

[NOTE]
====
The field `header` must specify all columns the CSV contains, or a contiguous subset of them starting from the first. **It is not possible to specify an arbitrary subset of columns.**

.Valid/Invalid `header` values given a CSV with columns `ID,name,title,rating`
[%collapsible]
=====
[cols="1,5m"]
|===
|label:yes[Valid]
|ID,name,title,rating

|label:yes[Valid]
|ID,name

|label:yes[Valid]
|ID,name,title

|label:no[Invalid]
|ID,rating

|===
=====
====


Source CSV files must fulfill some constraints:

- **They should not contain empty rows.**
- **They should not contain a header row.** +
Column names should be specified in the `header` attributes, and files should contain data rows only. A CSV with a header row will result in an extra imported entity, with the column names as data values.


include::{common}:partial$job-specification.adoc[tags=targets]

include::{common}:partial$job-specification.adoc[tags=transformations]

include::{common}:partial$job-specification.adoc[tags=actions]

include::{common}:partial$job-specification.adoc[tags=variables]
